<div class="wiki-toc"><ul class="wiki-toc-entry"><li class="wiki-toc-entry"><ul class="wiki-toc-entry"><li class="wiki-toc-entry"><a class="wiki-toc-ref" href="#section_1"><span class="wiki-toc-level">1</span><span class="wiki-toc-title">NAME</span></a></li><li class="wiki-toc-entry"><a class="wiki-toc-ref" href="#section_2"><span class="wiki-toc-level">2</span><span class="wiki-toc-title">SYNOPSIS</span></a></li><li class="wiki-toc-entry"><a class="wiki-toc-ref" href="#section_3"><span class="wiki-toc-level">3</span><span class="wiki-toc-title">DESCRIPTION</span></a></li><li class="wiki-toc-entry"><a class="wiki-toc-ref" href="#section_4"><span class="wiki-toc-level">4</span><span class="wiki-toc-title">OPTIONS</span></a></li><li class="wiki-toc-entry"><a class="wiki-toc-ref" href="#section_5"><span class="wiki-toc-level">5</span><span class="wiki-toc-title">COMMANDS</span></a><ul class="wiki-toc-entry"><li class="wiki-toc-entry"><a class="wiki-toc-ref" href="#section_5_1"><span class="wiki-toc-level">5.1</span><span class="wiki-toc-title">The create-project command</span></a></li><li class="wiki-toc-entry"><a class="wiki-toc-ref" href="#section_5_2"><span class="wiki-toc-level">5.2</span><span class="wiki-toc-title">The dist command</span></a></li><li class="wiki-toc-entry"><a class="wiki-toc-ref" href="#section_5_3"><span class="wiki-toc-level">5.3</span><span class="wiki-toc-title">The create-database command</span></a></li><li class="wiki-toc-entry"><a class="wiki-toc-ref" href="#section_5_4"><span class="wiki-toc-level">5.4</span><span class="wiki-toc-title">The create-plugin command</span></a></li><li class="wiki-toc-entry"><a class="wiki-toc-ref" href="#section_5_5"><span class="wiki-toc-level">5.5</span><span class="wiki-toc-title">The add-layout command</span></a></li><li class="wiki-toc-entry"><a class="wiki-toc-ref" href="#section_5_6"><span class="wiki-toc-level">5.6</span><span class="wiki-toc-title">The add-page command</span></a></li><li class="wiki-toc-entry"><a class="wiki-toc-ref" href="#section_5_7"><span class="wiki-toc-level">5.7</span><span class="wiki-toc-title">The add-model command</span></a></li><li class="wiki-toc-entry"><a class="wiki-toc-ref" href="#section_5_8"><span class="wiki-toc-level">5.8</span><span class="wiki-toc-title">The add-module command</span></a></li><li class="wiki-toc-entry"><a class="wiki-toc-ref" href="#section_5_9"><span class="wiki-toc-level">5.9</span><span class="wiki-toc-title">The build-doc command</span></a></li><li class="wiki-toc-entry"><a class="wiki-toc-ref" href="#section_5_10"><span class="wiki-toc-level">5.10</span><span class="wiki-toc-title">The info command</span></a></li><li class="wiki-toc-entry"><a class="wiki-toc-ref" href="#section_5_11"><span class="wiki-toc-level">5.11</span><span class="wiki-toc-title">The help command</span></a></li><li class="wiki-toc-entry"><a class="wiki-toc-ref" href="#section_5_12"><span class="wiki-toc-level">5.12</span><span class="wiki-toc-title">The generate command</span></a></li><li class="wiki-toc-entry"><a class="wiki-toc-ref" href="#section_5_13"><span class="wiki-toc-level">5.13</span><span class="wiki-toc-title">The propset command</span></a></li></ul><a class="wiki-toc-ref" href="#section_6"><span class="wiki-toc-level">6</span><span class="wiki-toc-title">PROPERTIES</span></a><ul class="wiki-toc-entry"><li class="wiki-toc-entry"><a class="wiki-toc-ref" href="#section_6_1"><span class="wiki-toc-level">6.1</span><span class="wiki-toc-title">author</span></a></li><li class="wiki-toc-entry"><a class="wiki-toc-ref" href="#section_6_2"><span class="wiki-toc-level">6.2</span><span class="wiki-toc-title">author_email</span></a></li><li class="wiki-toc-entry"><a class="wiki-toc-ref" href="#section_6_3"><span class="wiki-toc-level">6.3</span><span class="wiki-toc-title">gnat.project</span></a></li><li class="wiki-toc-entry"><a class="wiki-toc-ref" href="#section_6_4"><span class="wiki-toc-level">6.4</span><span class="wiki-toc-title">license</span></a></li><li class="wiki-toc-entry"><a class="wiki-toc-ref" href="#section_6_5"><span class="wiki-toc-level">6.5</span><span class="wiki-toc-title">search_dirs</span></a></li><li class="wiki-toc-entry"><a class="wiki-toc-ref" href="#section_6_6"><span class="wiki-toc-level">6.6</span><span class="wiki-toc-title">database</span></a></li></ul><a class="wiki-toc-ref" href="#section_7"><span class="wiki-toc-level">7</span><span class="wiki-toc-title">FILES</span></a><ul class="wiki-toc-entry"><li class="wiki-toc-entry"><a class="wiki-toc-ref" href="#section_7_1"><span class="wiki-toc-level">7.1</span><span class="wiki-toc-title">/usr/share/dynamo/base/generator.properties</span></a></li><li class="wiki-toc-entry"><a class="wiki-toc-ref" href="#section_7_2"><span class="wiki-toc-level">7.2</span><span class="wiki-toc-title">/usr/share/dynamo/base/mappings/AdaMappings.xml</span></a></li><li class="wiki-toc-entry"><a class="wiki-toc-ref" href="#section_7_3"><span class="wiki-toc-level">7.3</span><span class="wiki-toc-title">/usr/share/dynamo/base/mappings/MySQLMappings.xml</span></a></li><li class="wiki-toc-entry"><a class="wiki-toc-ref" href="#section_7_4"><span class="wiki-toc-level">7.4</span><span class="wiki-toc-title">/usr/share/dynamo/base/mappings/SQLiteMappings.xml</span></a></li><li class="wiki-toc-entry"><a class="wiki-toc-ref" href="#section_7_5"><span class="wiki-toc-level">7.5</span><span class="wiki-toc-title">/usr/share/dynamo/base/commands</span></a></li><li class="wiki-toc-entry"><a class="wiki-toc-ref" href="#section_7_6"><span class="wiki-toc-level">7.6</span><span class="wiki-toc-title">/usr/share/dynamo/base/templates</span></a></li><li class="wiki-toc-entry"><a class="wiki-toc-ref" href="#section_7_7"><span class="wiki-toc-level">7.7</span><span class="wiki-toc-title">/usr/share/dynamo/base/uml</span></a></li></ul><a class="wiki-toc-ref" href="#section_8"><span class="wiki-toc-level">8</span><span class="wiki-toc-title">SEE ALSO</span></a></li><li class="wiki-toc-entry"><a class="wiki-toc-ref" href="#section_9"><span class="wiki-toc-level">9</span><span class="wiki-toc-title">AUTHOR</span></a></li></ul></li></ul></div><h2 id="section_1">NAME</h2><p>dynamo - Ada Web Application Generator</p><h2 id="section_2">SYNOPSIS</h2><p><b>dynamo</b> [ -o <i>directory </i> ] [ -t <i>templates </i> ] [ -c <i>config-dir </i> ] <i>command </i></p><h2 id="section_3">DESCRIPTION</h2><p><i>dynamo</i> is a command to help developers write an Ada Web Application using the <b>ASF</b> framework.  <i>dynamo</i> provides several commands to perform one specific task in the development process.</p><p>First the <b>create-project</b> command will be used to initiate a new project.  The project name is used at this stage to configure the name of the root Ada package for the application.</p><p>The <b>add-model</b> command will be used to create a database table mapping file.  The database mapping file describes how to map a database table into an Ada record type for the <b>ADO</b> framework.  The <b>generate</b> command is then used to build the Ada model files from the database mapping files or from a UML model. At the same time, it generates the SQL database creation schemas for MySQL and SQLite databases.</p><p>The <b>add-page</b> command is then used to add web pages for the application.  When a new application layout is necessary, the <b>add-layout</b> command can be used.</p><p>To deploy an application on a production server, the <b>dist</b> command can be used to prepare the distribution tree, merge various files and directories, perform CSS and Javascript compression by using the <b>yui-compressor</b> or other tools.</p><p><i>dynamo </i> uses the <b>dynamo.xml</b> file to get information on the project and customize the generation.  It scans the GNAT project files to obtain the dependencies between several <i>dynamo </i> components.</p><h2 id="section_4">OPTIONS</h2><p>The following options are recognized by <i>dynamo</i>:</p><p>-o directory</p><p>Specifies the directory where result files are created.  The default is the current directory.</p><p>-c directory</p><p>Specifies the configuration directory which contains <i>dynamo</i> configuration files as well as template files.</p><p>-t directory</p><p>Specifies the templates directory.  This option can be used to override the templates provided by <i>dynamo</i>.</p><h2 id="section_5">COMMANDS</h2><h3 id="section_5_1">The create-project command</h3><p>dyna}}}</p><p>Create a new project in the current working directory or in the directory specified by the <i>-o </i> option.  The project name should be a valid Ada identifier.  It represents the Ada root package name for the project.  The command creates a set of Ada files, a configure script, a Makefile as well as a <i>gnatmake </i> build file.  The application can be immediately compiled to obtain a web server that is ready to run.  The <b>-l</b> option allows to choose the license headers.  The tool supports the generation of Apache, the GNU license or a proprietary license.  The author's name and email address can be specified in the command line so that the license headers integrates them correctly.</p><p>The project type is controlled by one of the <b>--web</b> , <b>--tool</b> or <b>--ado</b> option.  When <b>--ado</b> is specified, a command line project using Ada Database Objects is generated.  This type of project does not use Ada Server Faces nor Ada Web Application.  When <b>--web</b> option is specified, a full web application based on ASF and AWA is created.  The <b>--web</b> is the default if no other option is specified.</p><h3 id="section_5_2">The dist command</h3><p>After the project is compiled, this command allows to build the distribution files that must be installed on the server.  The <i>dist </i> command reads a <i>package.xml </i> file which describes how to make such distribution by specifying the files that must be copied.  For some files, it is possible to execute an external application that will do some transformation on the source file and prepare it for the installation. For example the <i>package.xml </i> description can compress the Javascript and CSS files by using the <b>yui-compressor</b> tool.  Images can be optimized by using <b>pngcrush</b> or <b>jpegtran.</b></p><h3 id="section_5_3">The create-database command</h3><p>The create-database command creates the database used by the application. The database schema file is stored in the directory identified by <i>model </i> and is generated by the <i>generate </i> command. The database connection string is optional.  The default database connection string is read from the <i>database </i> property in the <b>dynamo.xml</b> configuration file.  The connection string has the following form:</p><p>The command will connect to the database server specified by the connection string. It will use the admin user for this connection. The database is created if it does not yet exist. If a user is specified in the connection string, a grant command is issued to create that user and allow him to access the new database.</p><p>Example of connection string for MySQL database:</p><p>The MySQL server is running on localhost and TCP/IP port 3306.  The database name is <i>my</i>db _ and the user <i>joe </i> is created for the application with the password <i>admin. </i>  The database tables are created by using the <i>create-name-driver.sql </i> script where <i>name </i> represents the Dynamo project name.</p><h3 id="section_5_4">The create-plugin command</h3><p>Create a new plugin for the current project.  The plugin sources are created in the <b>plugins/\fIname\fR</b> directory.  The optional last argument controls whether the new plugin contains Ada sources or is a Web plugin.  The plugin can be seen as a separate small <i>Dynamo </i> project that is used by a project.  Once create, the other <i>Dynamo </i> commands can be executed in the new plugin.</p><h3 id="section_5_5">The add-layout command</h3><p>Create a new XHTML layout file.  The layout file is an XHTML facelet template which can be used by a web page to provide a common presentation layout.  When the project is created, at least one layout is proposed.  By adding a new layout, the application can provide different presentation styles.  The layout files are stored in the <b>web/WEB-INF/layouts</b> directory.</p><h3 id="section_5_6">The add-page command</h3><p>Create a new presentation page.  The presentation page is an XHTML facelet file which contains HTML code as well as ASF facelet components.  The presentation pages are stored in the <b>web</b> directory.</p><h3 id="section_5_7">The add-model command</h3><p>Create a new database table model mapping.  The model mapping is an XML file that describes how to map a database table into an Ada type. The model mappings are stored in the <b>db</b> directory.  The database table is mapped to an Ada tagged record in the package <b><i>project-name</i></b>.<i>module</i>.Model\fR if a module name is passed otherwise the package will have the name <b><i>project-name</i></b><b>.Model</b>.  The Ada record will have the name <b><i>name</i></b><b>_Ref</b>.</p><h3 id="section_5_8">The add-module command</h3><p>Add a new module to the project.  The module is composed of a set of Ada files and a set of XHTML presentation files.  The <i>name </i> parameter is the name of the Ada child package that represents the module. This is also the name of the directory that will contain the specific XHTML files used for the module. The following Ada packages are generated:</p><p>where <i>project </i> is the project name (defined by the <b>create-project</b> command) and <i>module </i> is the new module name.</p><p>The <i>Module </i> package defines the main module data type with the initialization steps. The <i>Beans </i> package defines the Ada bean types which are specific to the module. Each Ada bean type must be registered in the <i>Module </i> package.  The generated files are intended to be modified to implement the module functionality.</p><h3 id="section_5_9">The build-doc command</h3><p>Extract the documentation from the project source files and generate the project documentation.  The Ada specification files are scanned and the package specification header comment is used as the main structure for the project documentation.  The XML files are also scanned and the documentation is extracted from these files.  It can be merged together with other documentation to build up the final project user documentation.</p><h3 id="section_5_10">The info command</h3><p>Report information about the current project.  This command scans the GNAT projects to find the <i>dynamo </i> components dependencies.  It then lists the GNAT projects and the <i>dynamo </i> components that are used by the current project.</p><h3 id="section_5_11">The help command</h3><p>Give an help description about a command.</p><h3 id="section_5_12">The generate command</h3><p>Generate the Ada model implementation from the XML model mappings or from a UML model. The Ada model files are generated in the <b>src/model</b> directory.  Developers should not modify these files by themselves. When no file is specified, the <b>generate</b> command will read all the XML and XMI files stored in the <b>db</b> directory.  It will generate all the models found in those files.</p><p>At the same time, the command generates the SQL files to create the database tables for the supported drivers (MySQL and SQLite). For each project, it generates a set of SQL files that can be used to create or delete the database tables.</p><p>The <b>generate</b> command is able to read XMI 1.2 model files (UML 1.4) as well as ArgoUML files (.zargo). The UML model must use the <i>Dynamo </i> UML profile and assign the <i>Table </i> , <i>PK </i> and <i>Bean </i> stereotypes to the model element for the generation to be activated.</p><h3 id="section_5_13">The propset command</h3><p>Set a project property to configure some commands provided by <b>dynamo</b>.  The property is composed of a name and a value.  It is saved in the <b>dynamo.xml</b> file.  The following properties are recognized:</p><h2 id="section_6">PROPERTIES</h2><p>The <b>dynamo.xml</b> file defines several configuration properties which are used to customize several commands.  These properties can be modified with the <b>propset</b> command.</p><h3 id="section_6_1">author</h3><p>This property defines the author name inserted in file headers.</p><h3 id="section_6_2">author_email</h3><p>The author email address inserted in file headers.</p><h3 id="section_6_3">gnat.project</h3><p>The GNAT project file name which is used to build the project.  By default, the GNAT project file name is the same as the dynamo project name.  This property allows to specify a different name when the dynamo project name contains characters not allowed in GNAT project names.</p><h3 id="section_6_4">license</h3><p>This property controls the license header in file headers. The following license names are recognized: <b>gpl</b> <b>apache</b></p><h3 id="section_6_5">search_dirs</h3><p>This property is generated automatically by <b>dynamo</b> from the GNAT project paths.  It indicates the search paths that the Ada Web Application should use to search configuration files, resource bundles and XHTML presentation files.</p><h3 id="section_6_6">database</h3><p>The default database connection string.</p><h2 id="section_7">FILES</h2><h3 id="section_7_1">/usr/share/dynamo/base/generator.properties</h3><p>This configuration file is read by <i>dynamo </i> to configure various installation parameters necessary for the generation.</p><h3 id="section_7_2">/usr/share/dynamo/base/mappings/AdaMappings.xml</h3><h3 id="section_7_3">/usr/share/dynamo/base/mappings/MySQLMappings.xml</h3><h3 id="section_7_4">/usr/share/dynamo/base/mappings/SQLiteMappings.xml</h3><p>These XML files define the type mapping used in the <i>dynamo </i> model files.  These mapping indicate for each basic type used in the XML model files, what is the target Ada, MySQL or SQLite type name.</p><h3 id="section_7_5">/usr/share/dynamo/base/commands</h3><p>This directory contains XML files that describe additional template commands.</p><h3 id="section_7_6">/usr/share/dynamo/base/templates</h3><p>This directory contains the template files associated with <i>dynamo </i> commands.</p><h3 id="section_7_7">/usr/share/dynamo/base/uml</h3><p>This directory contains the UML profiles that <i>dynamo </i> reads to obtain global definitions.</p><h2 id="section_8">SEE ALSO</h2><p><i>gnatmake(1)</i>, <i>gcc(1)</i>, <i>yui-compressor(1)</i>, <i>pngcrush(1)</i>, <i>jpegtran(1)</i></p><h2 id="section_9">AUTHOR</h2><p>Written by Stephane Carrez.</p>
